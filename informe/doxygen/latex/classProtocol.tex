\hypertarget{classProtocol}{}\section{Protocol$<$ DH, CH, DL, CL, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$ Class Template Reference}
\label{classProtocol}\index{Protocol$<$ D\+H, C\+H, D\+L, C\+L, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$@{Protocol$<$ D\+H, C\+H, D\+L, C\+L, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$}}


This class is a meta model that implements all the common behavior of a network devise protocol from the O\+SI model and must be inherited to implement the protocol of the protocol.  




{\ttfamily \#include $<$protocol.\+h$>$}



Inheritance diagram for Protocol$<$ DH, CH, DL, CL, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{classProtocol__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Protocol$<$ DH, CH, DL, CL, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classProtocol__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bfseries Protocol} (const char $\ast$n)\hypertarget{classProtocol_aafd920db1bcaa6be4c2c1e72381b5cc8}{}\label{classProtocol_aafd920db1bcaa6be4c2c1e72381b5cc8}

\item 
void {\bfseries dint} (double t)\hypertarget{classProtocol_a027f1f8df37abc17e092ec0cd582c377}{}\label{classProtocol_a027f1f8df37abc17e092ec0cd582c377}

\item 
void {\bfseries dext} (Event x, double t)\hypertarget{classProtocol_acb3cc268567fc8265e13f3b13d020ffb}{}\label{classProtocol_acb3cc268567fc8265e13f3b13d020ffb}

\item 
virtual void \hyperlink{classProtocol_a9c6247fa4ea8524d1214fca4cacbd781}{dinternal} (double t)
\begin{DoxyCompactList}\small\item\em This method is virtual and must be overloaded with the protocol. \end{DoxyCompactList}\item 
virtual void \hyperlink{classProtocol_a9995a053fa35d5cd45f609958c6529b2}{dexternal} (double t)
\begin{DoxyCompactList}\small\item\em This method is virtual and can be overloaded with the protocol. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool {\bfseries queued\+Msgs} () const \hypertarget{classProtocol_a8330a7c4bd1b21b594ac38b453549e7d}{}\label{classProtocol_a8330a7c4bd1b21b594ac38b453549e7d}

\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classLogger}{Logger} {\bfseries logger}\hypertarget{classProtocol_a62d9de26edc6b3fb6a8f339bd1c87979}{}\label{classProtocol_a62d9de26edc6b3fb6a8f339bd1c87979}

\item 
std\+::queue$<$ DH $>$ {\bfseries higher\+\_\+layer\+\_\+data\+\_\+in}\hypertarget{classProtocol_a51bc76f9911caf0ddd1a2dbb2a859a94}{}\label{classProtocol_a51bc76f9911caf0ddd1a2dbb2a859a94}

\item 
std\+::queue$<$ DL $>$ {\bfseries lower\+\_\+layer\+\_\+data\+\_\+in}\hypertarget{classProtocol_a58603ff380d9566fe3403fe8748a87ab}{}\label{classProtocol_a58603ff380d9566fe3403fe8748a87ab}

\item 
std\+::queue$<$ CH $>$ {\bfseries higher\+\_\+layer\+\_\+ctrl\+\_\+in}\hypertarget{classProtocol_a96bce8402f48810faea021af43b3d760}{}\label{classProtocol_a96bce8402f48810faea021af43b3d760}

\item 
std\+::queue$<$ CL $>$ {\bfseries lower\+\_\+layer\+\_\+ctrl\+\_\+in}\hypertarget{classProtocol_a5c34f0a7166aaed640294afb1f4d71a9}{}\label{classProtocol_a5c34f0a7166aaed640294afb1f4d71a9}

\item 
\hyperlink{classmessage_1_1queue}{message\+::queue}$<$ D\+Hout $>$ {\bfseries higher\+\_\+layer\+\_\+data\+\_\+out} = 0\hypertarget{classProtocol_a6a1104489a70b06953a798a8638ca650}{}\label{classProtocol_a6a1104489a70b06953a798a8638ca650}

\item 
\hyperlink{classmessage_1_1queue}{message\+::queue}$<$ D\+Lout $>$ {\bfseries lower\+\_\+layer\+\_\+data\+\_\+out} = 2\hypertarget{classProtocol_a15b6d381ed9e96b96515b293f1acfdee}{}\label{classProtocol_a15b6d381ed9e96b96515b293f1acfdee}

\item 
\hyperlink{classmessage_1_1queue}{message\+::queue}$<$ C\+Hout $>$ {\bfseries higher\+\_\+layer\+\_\+ctrl\+\_\+out} = 1\hypertarget{classProtocol_ab14eec6d046b420a56da25367e9a9cc1}{}\label{classProtocol_ab14eec6d046b420a56da25367e9a9cc1}

\item 
\hyperlink{classmessage_1_1queue}{message\+::queue}$<$ C\+Lout $>$ {\bfseries lower\+\_\+layer\+\_\+ctrl\+\_\+out} = 3\hypertarget{classProtocol_afb1ff2eed1cb8b7380a764eab983b53b}{}\label{classProtocol_afb1ff2eed1cb8b7380a764eab983b53b}

\item 
Event {\bfseries output}\hypertarget{classProtocol_ab8656119955fe33f2f79a8098f77fa2e}{}\label{classProtocol_ab8656119955fe33f2f79a8098f77fa2e}

\item 
double {\bfseries next\+\_\+internal}\hypertarget{classProtocol_a371e159421cd779235858dbaf46e4a96}{}\label{classProtocol_a371e159421cd779235858dbaf46e4a96}

\item 
double {\bfseries last\+\_\+transition}\hypertarget{classProtocol_af1a9659d57ed7f5fb155a8ce71db4fbb}{}\label{classProtocol_af1a9659d57ed7f5fb155a8ce71db4fbb}

\item 
const double {\bfseries infinity} = std\+::numeric\+\_\+limits$<$double$>$\+::max()\hypertarget{classProtocol_a4eedc325cc4b0b5f00306fb0a3553c4a}{}\label{classProtocol_a4eedc325cc4b0b5f00306fb0a3553c4a}

\item 
double {\bfseries send\+\_\+time} = 0.\+001\hypertarget{classProtocol_a3f845ba4fa780e15a89858ff908fbb1f}{}\label{classProtocol_a3f845ba4fa780e15a89858ff908fbb1f}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename DH, typename CH, typename DL, typename CL, typename D\+Hout = DH, typename C\+Hout = CH, typename D\+Lout = DL, typename C\+Lout = CL$>$\\*
class Protocol$<$ D\+H, C\+H, D\+L, C\+L, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$}

This class is a meta model that implements all the common behavior of a network devise protocol from the O\+SI model and must be inherited to implement the protocol of the protocol. 

\begin{DoxyAuthor}{Author}
Laouen Louan Mayal Belloli 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
14 May 2017
\end{DoxyDate}
This model has four input port and four output ports to comunicate to the upper and lower layers of the O\+SI model using a different port for the data (Packet, Segment, Datagram, Frame, etc.) and for the control messages send between the layers due to the protocol they implement. The mapping between the input/output ports of a protocol and the data kind that should be send through them is specified as next\+:

Input queues\+:
\begin{DoxyItemize}
\item std\+::queue$<$\+D\+H$>$ higher\+\_\+layer\+\_\+data\+\_\+in; // Input Port 0
\item std\+::queue$<$\+D\+L$>$ lower\+\_\+layer\+\_\+data\+\_\+in; // Input Port 1
\item std\+::queue$<$\+C\+H$>$ higher\+\_\+layer\+\_\+ctrl\+\_\+in; // Input Port 2
\item std\+::queue$<$\+C\+L$>$ lower\+\_\+layer\+\_\+ctrl\+\_\+in; // Input Port 3
\end{DoxyItemize}

Output queues\+:
\begin{DoxyItemize}
\item message\+::queue$<$\+D\+Hout$>$ higher\+\_\+layer\+\_\+data\+\_\+out = 0; // Output Port 0
\item message\+::queue$<$\+D\+Lout$>$ lower\+\_\+layer\+\_\+data\+\_\+out = 1; // Output Port 1
\item message\+::queue$<$\+C\+Hout$>$ higher\+\_\+layer\+\_\+ctrl\+\_\+out = 3; // Output Port 2
\item message\+::queue$<$\+C\+Lout$>$ lower\+\_\+layer\+\_\+ctrl\+\_\+out = 3; // Output Port 3
\end{DoxyItemize}

How the incoming messages are queued in the corresponding input queues and how the pushed messages in the output queues are send through the correct output ports is a task the protocol developer does not need to care because it is implemented in the template model \hyperlink{classProtocol}{Protocol}.

The protocol developer only need to implement the dinternal method where the protocol must be implemented and must uses the queue with the methods front, pop and push to read incoming messages from the input queues and to send messages through the output ports to other layers.

Note\+: modelers familirized with D\+E\+VS and Power\+D\+E\+VS can use the dexternal method to implement some behavior when external transition is occuring.

The processing flow is the following\+:
\begin{DoxyEnumerate}
\item The model stays in I\+D\+LE until a message arrives.
\item When that happens, the dinternal method is used to process the message.
\item When dinternal finish the model uses the value stored in next\+\_\+internal to set how much virtual time (the simulated time) has take the protocol to process the dinternal. In the dinternal method this variable must be correctly set with a value grater than zero.
\item If there is messages in the output queues, the model iterate through all of them to send all of them.
\item If there is no messages in the input queues the model comes back to I\+D\+LE state.
\item If it still are messages in the input queues, the model repeat the whole process.
\end{DoxyEnumerate}

Note\+: The messages must be poped from the input queues by the protocol in the diternal method, if this does not happen, the model will trigger the dinternal method again until they are all empty.


\begin{DoxyTemplParams}{Template Parameters}
{\em DH} & The data type of the messages received from the input port 0 \\
\hline
{\em CH} & The data type of the messages received from the input port 1 \\
\hline
{\em DL} & The data type of the messages received from the input port 2 \\
\hline
{\em CL} & The data type of the messages received from the input port 3 \\
\hline
{\em D\+Hout} & The data type of the messages send trough output port 0 (by default is the same as DH) \\
\hline
{\em C\+Hout} & The data type of the messages send trough output port 1 (by default is the same as CH) \\
\hline
{\em D\+Lout} & The data type of the messages send trough output port 2 (by default is the same as DL) \\
\hline
{\em C\+Lout} & The data type of the messages send trough output port 3 (by default is the same as CL) \\
\hline
\end{DoxyTemplParams}


\subsection{Member Function Documentation}
\index{Protocol@{Protocol}!dexternal@{dexternal}}
\index{dexternal@{dexternal}!Protocol@{Protocol}}
\subsubsection[{\texorpdfstring{dexternal(double t)}{dexternal(double t)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename DH, typename CH, typename DL, typename CL, typename D\+Hout = DH, typename C\+Hout = CH, typename D\+Lout = DL, typename C\+Lout = CL$>$ virtual void {\bf Protocol}$<$ DH, CH, DL, CL, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$\+::dexternal (
\begin{DoxyParamCaption}
\item[{double}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classProtocol_a9995a053fa35d5cd45f609958c6529b2}{}\label{classProtocol_a9995a053fa35d5cd45f609958c6529b2}


This method is virtual and can be overloaded with the protocol. 

This method is called each time an external transition takes place.


\begin{DoxyParams}{Parameters}
{\em t} & The virtual global time of the simulation at which the method is triggered. \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{classlink__protocol_a41b2cf20f21b9b5b7170f8f33fd56667}{link\+\_\+protocol}, \hyperlink{classdns__server_a3a6cdeea496be969d034af8a0bdb893f}{dns\+\_\+server}, \hyperlink{classip__protocol_a34e2cc9e802edf0ba1fdbcbcbee92f5b}{ip\+\_\+protocol}, and \hyperlink{classswitch__protocol_a93b0465ace315872626f2f04c29b55f3}{switch\+\_\+protocol}.

\index{Protocol@{Protocol}!dinternal@{dinternal}}
\index{dinternal@{dinternal}!Protocol@{Protocol}}
\subsubsection[{\texorpdfstring{dinternal(double t)}{dinternal(double t)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename DH, typename CH, typename DL, typename CL, typename D\+Hout = DH, typename C\+Hout = CH, typename D\+Lout = DL, typename C\+Lout = CL$>$ virtual void {\bf Protocol}$<$ DH, CH, DL, CL, D\+Hout, C\+Hout, D\+Lout, C\+Lout $>$\+::dinternal (
\begin{DoxyParamCaption}
\item[{double}]{t}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classProtocol_a9c6247fa4ea8524d1214fca4cacbd781}{}\label{classProtocol_a9c6247fa4ea8524d1214fca4cacbd781}


This method is virtual and must be overloaded with the protocol. 

This method is called while the input queues has messages to process and the procotol should be implemented here..


\begin{DoxyParams}{Parameters}
{\em t} & The virtual global time of the simulation at which the method is triggered. \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{classlink__protocol_abae9797f2bf160152cf43bd011742d22}{link\+\_\+protocol}, \hyperlink{classdns__server_a51e296892a2de8776c83689f172a0797}{dns\+\_\+server}, \hyperlink{classip__protocol_a5c4dd62ee8cffa83a592f29306686be9}{ip\+\_\+protocol}, \hyperlink{classudp__protocol_aab75d26186e52fc49ba9f8b88fba0071}{udp\+\_\+protocol}, \hyperlink{classswitch__protocol_a7dd0e54d6b2a3683a5be387cffa99a22}{switch\+\_\+protocol}, \hyperlink{classip__router__protocol_a14cf3c7e1418ee8c6035b79626f99438}{ip\+\_\+router\+\_\+protocol}, and \hyperlink{classip__host__protocol_a2e2c43aeb81ae38702b7dec6f7df9227}{ip\+\_\+host\+\_\+protocol}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/lao/powerdevs/atomics/\+Network\+D\+E\+V\+S/template/protocol.\+h\end{DoxyCompactItemize}
